# EmojiManager - 表情包管理器

<div align="center">

![EmojiManager](ScreenShot.jpg)  

*一个配合QQNT使用的本地表情包管理工具*  

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Windows-blue.svg)](https://www.microsoft.com/windows)  

受够了QQNT的弱智表情管理？那么本工具也许就是你需要的！
</div>

## ✨ 主要功能

- **快速调出**: 全局快捷键或托盘图标快速打开表情选择器
- **一键发送**: 点击表情自动复制并粘贴到QQ聊天窗口
- **兼容旧版**: 支持QQNT与旧版（怀旧版）
- **最近表情**: 记录常用表情，显示在顶部便于快速选择
- **文件夹管理**: 支持多层级文件夹分类，自动扫描整理
- **智能检测**: 自动修正QQNT导致的文件格式问题
- **拖拽添加**: 直接从QQ拖拽图片到程序中添加新表情
- **动态缩放**: 支持每个分组独立调整缩略图大小

## 🛠️ 系统要求

- Windows 10/11
- .NET 8.0 Runtime（程序会自动提示安装）

## 📦 下载使用

### 安装步骤
1. 从 [Releases](https://github.com/Natsukage/EmojiManager/releases) 下载最新版本
2. 解压到任意文件夹
3. 双击运行 `EmojiManager.exe`

### 首次设置
1. **设置表情包路径**
   - 程序首次运行会使用默认路径：`我的图片/表情包`
   - 如需修改，点击标题栏的设置按钮 ⚙️
   - 选择您的表情包存放目录
   - 程序会自动扫描所有子文件夹

2. **自定义快捷键**（可选）
   - 默认快捷键为 F12
   - 如需修改，在设置窗口点击"录制快捷键"
   - 按下您想要的组合键（如 Ctrl+Shift+E）

3. **最近表情设置**（可选）
   - 默认记录最近20个表情
   - 可在设置中调整数量上限（0-100个）
## ⌨️ 基本操作

| 操作 | 说明 |
|------|------|
| **F12** | 显示/隐藏表情选择器（可自定义） |
| **点击表情** | 复制表情并自动粘贴到QQ |
| **右键表情** | 打开文件位置或删除文件 |
| **拖拽图片** | 从QQ或文件夹拖拽图片添加表情 |
| **托盘图标** | 左键显示/隐藏，右键退出程序 |
| **Ctrl+滚轮** | 动态调整当前分组的缩略图大小 |
| **右键分组标题** | 重置该分组的缩放倍率 |

## ⚙️ 个性化设置

点击程序右上角的 ⚙️ 设置按钮可以调整：

- **表情包路径**: 更改表情存放位置
- **快捷键**: 自定义打开程序的快捷键
- **最近表情**: 设置记录数量（0-100个）
- **排序方式**: 按时间或名称排序
- **文件名搜索**: 启用按文件名搜索功能（默认关闭）
- **缩略图尺寸**: 设置基础缩略图大小（40-200像素）
- **动态缩放**: 启用/禁用Ctrl+滚轮缩放功能
- **格式修正**: 一键修复文件扩展名问题
- **重置缩放**: 一键重置所有分组的缩放倍率

## 🎯 使用技巧

### 表情分类管理
- 在表情包文件夹下创建子文件夹进行分类
- 支持无限层级的文件夹嵌套
- 程序会自动按文件夹生成分类树

### 最近表情功能
- 使用过的表情会自动显示在"最近使用"分组
- 支持设置记录数量上限
- 最近使用的表情会自动排到最前面

### 智能格式处理
- 自动检测和修正错误的文件扩展名
- 解决QQ保存图片时的格式混乱问题
- 支持批量修正现有文件

### 动态缩放功能
- 按住Ctrl键并滚动鼠标滚轮即可调整当前分组的缩略图大小
- 支持20%-500%的缩放比例
- 每个分组的缩放设置独立保存，下次启动自动恢复
- 右键点击分组标题可重置该分组缩放，设置中可一键重置所有分组
- 最近使用分组也支持独立的缩放设置

### 文件名搜索功能
- **默认状态**: 搜索功能默认关闭，只能按文件夹名搜索
- **启用条件**: 适用于有意义文件名的表情包（如"陪笑.jpg"、"喜欢.gif"）
- **使用场景**: 当您的表情文件有描述性名称时开启此功能
- **注意事项**: 如果表情文件是QQ默认的32位MD5名称，建议保持关闭，否则会搜索出很多无关图片
- **搜索效果**: 开启后可同时搜索文件夹名和图片文件名
- **状态显示**: 鼠标悬停图片时会在底部状态栏显示完整文件名

## 🎨 自定义托盘图标

### 图标要求
- **文件名**: `icon.ico`（必须）
- **位置**: 程序根目录（与 EmojiManager.exe 同目录）
- **格式**: ICO 格式
- **推荐尺寸**: 包含 16x16、32x32、48x48 像素的多尺寸ICO文件
- **建议**: 使用简洁的设计，确保在任务栏上清晰可见

### 自定义步骤
1. 准备您的图标文件，确保命名为 `icon.ico`
2. 将图标文件放置在程序根目录（与 EmojiManager.exe 同目录）
3. 重启程序，新图标将自动生效

### 图标制作工具
- [在线ICO转换器](https://www.icoconverter.com/) - 将PNG/JPG转换为ICO

**注意**: 如果没有提供自定义图标文件，程序将使用内置的默认蓝色图标。

## 🔧 常见问题

**Q: 程序无法启动？**  
A: 需要安装.NET 8.0 Runtime，程序会自动提示下载链接

**Q: 快捷键不生效？**  
A: 可能被其他软件占用，请在设置中更换快捷键

**Q: 表情显示不全？**  
A: 检查表情包文件夹路径设置是否正确

**Q: 如何完全退出程序？**  
A: 右键点击托盘图标，选择"退出程序"

**Q: 搜索功能是否需要开启？**  
A: 默认关闭。只有当您的表情文件有描述性名称（如"陪笑.jpg"）时才建议开启

**Q: 为什么搜索出来很多无关图片？**  
A: 可能是QQNT默认保存的MD5文件名导致，对于没有整理过的图片名，建议在设置中关闭文件名搜索功能

## 📝 版本历史

- **v1.2.0** - 动态缩略图缩放
  - 支持Ctrl+滚轮动态调整每个分组的缩略图大小
  - 缩放范围20%-500%
  - 每个分组独立记忆缩放设置

- **v1.1.7** - ICC配置文件兼容性修复
  - 修复带有ICC profile的JPEG图片复制问题
  - 改进图片处理，忽略色彩配置文件以提升兼容性

- **v1.1.6** - 文件名搜索功能
  - 新增按文件名搜索功能，可搜索图片文件名（默认关闭）
  - 设置界面添加搜索功能开关和详细说明
  - 状态栏显示，鼠标悬停图片时显示完整文件名

- **v1.1.5** - QQ兼容性增强
  - 增强QQ怀旧版兼容性，确保在所有QQ版本中都能正常使用

- **v1.1.4** - 系统托盘功能
  - 新增系统托盘功能，支持最小化到托盘
  - 调整程序关闭逻辑，点击X按钮隐藏而非退出
  - 支持自定义托盘图标

- **v1.1.3** - 路径切换优化
  - 修复切换表情包路径的刷新问题

- **v1.1.2** - 图片排序功能
  - 新增按创建时间排序选项

- **v1.1.1** - 右键菜单功能
  - 新增表情右键菜单
  - 支持快速打开文件位置
  - 支持直接删除表情文件

- **v1.1.0** - 智能格式检测
  - 自动检测图片真实格式，修正QQNT文件格式问题
  - 支持批量格式修正

- **v1.0.0** - 初始版本
  - 基础表情包管理功能

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🙏 致谢

- [Microsoft WebView2](https://developer.microsoft.com/microsoft-edge/webview2/) - 现代Web技术集成
- [Hardcodet.NotifyIcon.Wpf](https://github.com/hardcodet/wpf-notifyicon) - WPF托盘图标支持
- [.NET Community](https://dotnet.microsoft.com/) - 强大的开发框架